<form class="registration-form" (ngSubmit)="onSubmit()" [formGroup]="form">
    <md-card>
        <md-card-title>Регистрация</md-card-title>
        <md-card-content>
            <div class="form-group"
                 [class.has-error]="!isControlValid('username')">
                <md-input type="text" placeholder="Имя пользователя" formControlName="username"
                          [disabled]="pending"></md-input>
                <md-input-error *ngIf="hasControlError('username', 'required')">
                    Введите имя пользователя
                </md-input-error>
                <md-input-error *ngIf="hasControlError('username', 'minlength')">
                    Имя пользователя должно быть не менее {{ getControlError('username', 'minlength').requiredLength }} символов
                </md-input-error>
                <md-input-error *ngFor="let error of errors.children?.username?.errors">{{ error }}</md-input-error>
            </div>
            <div class="form-group"
                 [class.has-error]="!isControlValid('plainPassword[first]')">
                <md-input type="password" placeholder="Пароль" formControlName="plainPassword[first]"
                          [disabled]="pending"></md-input>
                <md-input-error *ngIf="hasControlError('plainPassword[first]', 'required')">
                    Введите пароль
                </md-input-error>
                <md-input-error *ngIf="hasControlError('plainPassword[first]', 'minlength')">
                    Пароль должен быть не менее {{ getControlError('plainPassword[first]', 'minlength').requiredLength }} символов
                </md-input-error>
            </div>
            <div class="form-group"
                 [class.has-error]="!isControlValid('plainPassword[second]')">
                <md-input type="password" placeholder="Пароль ещё раз" formControlName="plainPassword[second]"
                          [disabled]="pending"></md-input>
                <md-input-error *ngIf="hasControlError('plainPassword[second]', 'required')">
                    Подтвердите пароль
                </md-input-error>
                <md-input-error *ngIf="hasControlError('plainPassword[second]', 'equalTo')">
                    Пароли не свпадают
                </md-input-error>
            </div>
            <div class="form-error" *ngIf="errors.errors?.length">
                <md-icon>error</md-icon>
                {{ errors.errors[0] }}
            </div>
        </md-card-content>
        <md-card-actions align="end">
            <button type="submit" md-button color="primary" [disabled]="!form.valid || pending" align="end">
                ЗАРЕГИСТРИРОВАТЬСЯ
            </button>
        </md-card-actions>
    </md-card>
</form>